version: "3.9"

services:
  discordbot:
    container_name: discordbot
    image: regunakyle/discordbot
    environment:
      DISCORD_TOKEN: ${DISCORD_TOKEN}
      DATABASE_CONNECTION_STRING: ${DATABASE_CONNECTION_STRING}
      LOGGER_LEVEL: ${LOGGER_LEVEL}
      # Used by old style prefix commands; this bot only has the <PREFIX>sync prefix command
      PREFIX: ${PREFIX}
      # Maximum file upload size, used by command like /pixiv
      MAX_FILE_SIZE: ${MAX_FILE_SIZE}
      # Lavalink parameters, used by the Music module
      LAVALINK_IP: ${LAVALINK_IP}
      LAVALINK_PORT: ${LAVALINK_PORT}
      LAVALINK_PASSWORD: ${LAVALINK_PASSWORD}
      # OpenAI key for ChatGPT usage
      OPENAI_API_KEY: ${OPENAI_API_KEY}
    volumes:
      - dbot-vol:/app/volume
    restart: unless-stopped
  lavalink:
    container_name: lavalink
    image: fredboat/lavalink
    environment:
      server.port: ${LAVALINK_PORT}
      lavalink.server.password: ${LAVALINK_PASSWORD}
    restart: unless-stopped

volumes:
  dbot-vol:
    name: dbot-vol

networks:
  default:
    name: discord-bot-network
