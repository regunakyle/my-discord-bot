version: "3.9"

services:
  discordbot:
    container_name: discordbot
    image: regunakyle/my-discord-bot:latest
    environment:
      DISCORD_TOKEN: <YOUR_TOKEN_HERE>
      # Use "sqlite+aiosqlite:///volume/db.sqlite3" if you are not sure
      DATABASE_CONNECTION_STRING: sqlite+aiosqlite:///volume/db.sqlite3
      # Used by old style prefix commands; this bot only has the <PREFIX>sync prefix command
      PREFIX: ">>"
      # Maximum file upload size, used by command like /pixiv
      MAX_FILE_SIZE: 25
      # Lavalink parameters, used by the Music module
      LAVALINK_IP: lavalink
      LAVALINK_PORT: 2333
      LAVALINK_PASSWORD: youshallnotpass
      XDG_CONFIG_HOME: /app/volume
    volumes:
      - dbot-vol:/app/volume
    restart: unless-stopped

  lavalink:
    container_name: lavalink
    image: fredboat/lavalink:3.7
    environment:
      server.port: 2333
      lavalink.server.password: youshallnotpass
    restart: unless-stopped

volumes:
  dbot-vol:
    name: discord-bot-vol

networks:
  default:
    name: discord-bot-network
